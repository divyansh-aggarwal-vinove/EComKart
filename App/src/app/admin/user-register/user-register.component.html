<div class="container">
  <h1>{{ isRegister  ? 'User Registraion' : 'Update User Details'}}</h1>
  <hr>
  <form [formGroup]="userForm" class="box" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label><b>Name:</b></label>
      <input type="text" placeholder="Full Name" formControlName="name" class="form-control"
        [class.is-invalid]="name.invalid && name.untouched">
      <div *ngIf="name.invalid && name.touched">
        <small class="text-danger" *ngIf="name.errors?.required">Full name is required</small>
        <small class="text-danger" *ngIf="name.errors?.minlength">Name must be at least 3
          characters</small>
      </div>
    </div>

    <div class="form-group">
      <label><b>Age:</b></label>
      <input type="number" placeholder="Age in years approx." formControlName="age" class="form-control"
        [class.is-invalid]="age.invalid && age.untouched">
      <div *ngIf="age.invalid && age.touched">
        <small class="text-danger" *ngIf="age.errors?.required">Age cannot be empty</small>
        <small class="text-danger" *ngIf="age.errors?.max">Age more than 99 not allowed</small>
      </div>
    </div>

    <div class="form-group">
      <label><b>Contact No.:</b></label>
      <input type="number" placeholder="Phone Number" pattern="^\d{10}$" formControlName="contactno" class="form-control"
        [class.is-invalid]="contactno.invalid && contactno.untouched">
      <div *ngIf="contactno.invalid && contactno.touched">
        <small class="text-danger" *ngIf="contactno.errors?.required">Contact number cannot be empty</small>
        <small class="text-danger" *ngIf="contactno.errors?.pattern">Contact number must be a 10 digit number</small>
      </div>
    </div>

    <div class="form-group">
      <label><b>Address:</b></label>
      <input type="text" placeholder="Full Postal Address" formControlName="address" class="form-control"
        [class.is-invalid]="address.invalid && address.untouched">
      <div *ngIf="address.invalid && address.touched">
        <small class="text-danger" *ngIf="address.errors?.required">Address is required</small>
      </div>
    </div>

    <div class="form-group">
      <label><b>Email:</b></label>
      <input type="text" placeholder="example@xyz.com" formControlName="email" class="form-control"
        [class.is-invalid]="email.invalid && email.untouched">
      <div *ngIf="email.invalid && email.touched">
        <small class="text-danger" *ngIf="email.errors?.required">Email is required</small>
        <small class="text-danger" *ngIf="email.errors?.email">Email must be a valid email address</small>
      </div>
    </div>

    <div class="form-group">
      <label><b>Username:</b></label>
      <input type="text" placeholder="abc123#" formControlName="username" class="form-control"
        [class.is-invalid]="username.invalid && username.untouched">
      <div *ngIf="username.invalid && username.touched">
        <small class="text-danger" *ngIf="username.errors?.required">Username is required</small>
        <small class="text-danger" *ngIf="username.errors?.minlength">Username must be at least 3 characters</small>
      </div>
    </div>
    
    <div class="form-group">
      <label><b>Password:</b></label>
      <input type="text" placeholder="password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" formControlName="password" class="form-control"
        [class.is-invalid]="password.invalid && password.untouched">
      <div *ngIf="password.invalid && password.touched">
        <small class="text-danger" *ngIf="password.errors?.required">Password is required</small>
        <small class="text-danger" *ngIf="password.errors?.pattern">Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters</small>
      </div>
    </div>
    <button type="submit" *ngIf="isRegister" [disabled]="userForm.invalid">Register</button>
    <button type="reset" *ngIf="isRegister">Reset</button>

    <button *ngIf="!isRegister" routerLink="/" [disabled]="userForm.invalid" type="submit" (click)="onUpdate()" style="left: 50%;">Submit</button>
</form>

</div>